{% extends "base.html" %}


{% block content %}
<div class="container mt-4">


    <!-- Title -->
    <div class="text-center mb-4">
        <h2 class="fw-bold text-dark" style="font-size: 1.8rem;">
            üö´ Restrictions for {{ health.problem_name }}
        </h2>
        <hr class="w-50 mx-auto">
    </div>


    <!-- Food Restrictions -->
    <div class="card shadow-sm mb-4">
        <div class="card-header fw-bold text-success text-center"
             style="background: #d4edda; font-size: 1.4rem; border-radius: 6px;">
            üç¥ <strong>Food Restrictions</strong>
        </div>
        <div class="card-body">
            {% if food_restrictions %}
            <table class="table table-striped table-bordered table-hover text-center align-middle"
                   style="width: 100%; table-layout: fixed; border-collapse: separate; border-spacing: 0 12px; font-size: 1.05rem;">
                <thead class="table-light">
                    <tr>
                        <th style="width: 33.3%; border: 1px solid #dee2e6; padding: 18px;">üçΩÔ∏è Food Name</th>
                        <th style="width: 33.3%; border: 1px solid #dee2e6; padding: 18px;">‚ö†Ô∏è Severity</th>
                        <th style="width: 33.3%; border: 1px solid #dee2e6; padding: 18px;">üìå Reason</th>
                    </tr>
                </thead>
                <tbody>
                    {% for fr in food_restrictions %}
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 18px;">{{ fr.food.food_name }}</td>
                        <td style="border: 1px solid #dee2e6; padding: 18px;">
                            {% if fr.food_restriction.f_severity == "High" %}
                                <span class="badge bg-danger" style="font-size: 1rem;">{{ fr.food_restriction.f_severity }}</span>
                            {% elif fr.food_restriction.f_severity == "Medium" %}
                                <span class="badge bg-warning text-dark" style="font-size: 1rem;">{{ fr.food_restriction.f_severity }}</span>
                            {% else %}
                                <span class="badge bg-success" style="font-size: 1rem;">{{ fr.food_restriction.f_severity }}</span>
                            {% endif %}
                        </td>
                        <td style="border: 1px solid #dee2e6; padding: 18px;" class="text-muted fst-italic">
                            {{ fr.food_restriction.f_reason }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="text-muted fst-italic">No food restrictions found.</p>
            {% endif %}
        </div>
    </div>


    <!-- Exercise Restrictions -->
    <div class="card shadow-sm mb-4">
        <div class="card-header fw-bold text-success text-center"
             style="background: #d4edda; font-size: 1.4rem; border-radius: 6px;">
            üèÉ <strong>Exercise Restrictions</strong>
        </div>
        <div class="card-body">
            {% if exercise_restrictions %}
            <table class="table table-striped table-bordered table-hover text-center align-middle"
                   style="width: 100%; table-layout: fixed; border-collapse: separate; border-spacing: 0 12px; font-size: 1.05rem;">
                <thead class="table-light">
                    <tr>
                        <th style="width: 33.3%; border: 1px solid #dee2e6; padding: 18px;">üí™ Exercise Name</th>
                        <th style="width: 33.3%; border: 1px solid #dee2e6; padding: 18px;">‚ö†Ô∏è Severity</th>
                        <th style="width: 33.3%; border: 1px solid #dee2e6; padding: 18px;">üìå Reason</th>
                    </tr>
                </thead>
                <tbody>
                    {% for er in exercise_restrictions %}
                    <tr>
                        <td style="border: 1px solid #dee2e6; padding: 18px;">{{ er.exercise.exercise_name }}</td>
                        <td style="border: 1px solid #dee2e6; padding: 18px;">
                            {% if er.exercise_restriction.e_severity == "High" %}
                                <span class="badge bg-danger" style="font-size: 1rem;">{{ er.exercise_restriction.e_severity }}</span>
                            {% elif er.exercise_restriction.e_severity == "Medium" %}
                                <span class="badge bg-warning text-dark" style="font-size: 1rem;">{{ er.exercise_restriction.e_severity }}</span>
                            {% else %}
                                <span class="badge bg-success" style="font-size: 1rem;">{{ er.exercise_restriction.e_severity }}</span>
                            {% endif %}
                        </td>
                        <td style="border: 1px solid #dee2e6; padding: 18px;" class="text-muted fst-italic">
                            {{ er.exercise_restriction.e_reason }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="text-muted fst-italic">No exercise restrictions found.</p>
            {% endif %}
        </div>
    </div>


    <!-- Back Buttons: Vertical stack, centered, gap -->
    <div style="display: flex; flex-direction: column; align-items: center; margin-top: 40px; gap: 20px;">
        <a href="{% url 'health_problem' %}"
           class="btn btn-success fw-bold px-4 py-2 rounded-pill"
           style="font-size: 1.1rem; text-decoration: none; width: 200px; text-align: center;">
            ‚¨Ö Back to Search
        </a>


        <a href="{% url 'main_page' %}"
           class="btn btn-outline-success fw-bold px-4 py-2 rounded-pill"
           style="font-size: 1.1rem; text-decoration: none; width: 200px; text-align: center;">
            ‚¨Ö Back to Menu
        </a>
    </div>


</div>
{% endblock %}
